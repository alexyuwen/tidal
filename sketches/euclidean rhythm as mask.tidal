-- Using euclidean rhythm as mask.
let
euclidPat = "t(3,8)"
notes1 = slow 1 $ fastcat ["[0 2 4 7 2 4 [0 2 4]@2]","0 3 5 7 3 5 [0 3 5]@2"]
notes = n (scale "minor" $ bite 8 (segment 8 $ irand 4 + "0 4") notes1)
in do
  d1 $ "cp" # gain 1
  d3 $ euclidPat # n 0 # s "supervibe" # gain 1.1
  d4 $ mask (inv euclidPat) $ notes # s "supervibe"
  d5 $ pickF (segment 16 $ irand 2) [id, rev] $ chop 16 $ loopAt 1 $ s "break:4"
