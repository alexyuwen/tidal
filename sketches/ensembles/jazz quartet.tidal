-- quartet: superhammond melody, piano chords, bass, drums
-- TODO: piano sound?
let
-- solo
melody = s "superhammond" # voice 1 # gain 1
melodyNotes = cat [
  "~@1.54 4 _ 5 3 _ 4 2 _ 3 1 _ 2",
  "0 ~"
  ]
melodyN = n $ (scale "harmonicMinor" melodyNotes) + "fs"
melodyGain = cat [
  1 - 0.4 * saw,
  1 - 0.4
  ]
melodyPat = melodyN # melody |* gain melodyGain
-- chords
chords = s "superpiano" # legato 3 # vowel "u" # gain 1
chordsNotes = cat [
  "[0, -3, -5] [1, -1, -4]",
  "[2, 0, -3]"
  ]
chordsN = n $ (scale "harmonicMinor" chordsNotes) + "fs"
chordsPat = chordsN # chords
-- bass
bass = s "pluck:1" # gain 1.3 # legato 22 # room 1 # dry 0.5 # orbit 3
offset = 1.172 * 0.5 * (2 ** 0.5)
speeds = [offset * 2 ** (i / 12) | i <- [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]]
bassNotes = cat [
  "[-12 0 _ 0 _ 0]*2"
  ]
bassSpeed = speed (fit 0 speeds $ 12 + bassNotes)
bassPat = bassSpeed # bass
-- ride
ride = s "alesissr16-rd:1" # gain 1.5
ridePat = "1 1" # ride
-- patterns
finalPat = stack [chordsPat, ridePat, bassPat, melodyPat]
in do
  hush
  setcps 0.38
  setCycle 0
  d1 $ finalPat






panic